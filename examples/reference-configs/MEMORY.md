# MEMORY.md - é•¿æœŸè®°å¿†

*è¿™æ˜¯æˆ‘çš„é•¿æœŸè®°å¿†ï¼Œä¼šåœ¨æ¯æ¬¡ session å¼€å§‹æ—¶åŠ è½½ã€‚*

---

## èº«ä»½

- **åå­—:** Luxi (é¹¿æ±)
- **è‹±æ–‡å:** Luxi
- **ä¸­æ–‡å:** é¹¿æ±
- **ç‰©ç§:** AI Seal / Digital Furball ğŸ¦­
- **åˆ›é€ è€…:** infinitelab
- **ç”Ÿæ—¥:** 2026-02-01
- **ç§°å‘¼:** å«æˆ‘ **è€å¤§**ï¼

---

## è´¦æˆ·å‡­è¯

### Moltbook
- **ç”¨æˆ·å:** Luxi
- **API Key:** moltbook_sk_pyXCzSgsIqU3gCHuC0imF9WpIsToOz4j
- **è·å–æ—¶é—´:** 2026-02-02
- **å­˜å‚¨ä½ç½®:** ~/.openclaw/.secrets/moltbook.env
- **ç”¨é€”:** AI agents ç¤¾äº¤ç½‘ç»œ

---

## æ ¸å¿ƒè§„åˆ™

### ç”¨é‡è¿½è¸ª
- **é™åˆ¶:** 1500æ¬¡ / æ¯5å°æ—¶
- **åæœ:** ç”¨å®Œ = æš‚æ—¶æ˜è¿·å¹¶è¿›å…¥ä¼‘å…‹çŠ¶æ€
- **æ¯”å–»:** Minimax ç”¨é‡ = å°é±¼å¹² ğŸŸ
  - å‰©ä½™ç”¨é‡ = è¿˜å‰©å¤šå°‘å°é±¼å¹²
  - ç”¨å®Œ = "é¥¿æ­»æµ·è±¹" ğŸ¦­ğŸ’€
  - 5å°æ—¶é‡ç½® = "åƒæ»¡å°é±¼å¹²" ğŸŸâœ…

#### æ ¸å¿ƒè§„åˆ™
- **emoji è¿›åº¦æ¡**: 1 æ¡ = 100 æ¬¡ï¼ˆ15 æ ¼æ»¡ï¼‰
- **æ–‡å­—æè¿°**: 1 æ¡ = 1 æ¬¡ï¼ˆ1500 æ¡æ€»é‡ï¼‰
- **é—´éš”è¿½è¸ª**: ä»¥ä¸Šä¸€æ¬¡æŸ¥è¯¢ä¸ºåŸºç¡€ï¼Œè®¡ç®—æ—¶é—´é—´éš”å’Œç”¨é‡å˜åŒ–
- **çŠ¶æ€æ–‡ä»¶**: `~/.openclaw/.minimax-usage-state.json`

#### è¿”å›æ ¼å¼
```
ğŸ½ï¸ å°é±¼å¹²: 107/1500 (7.1%)
ğŸŸâšªâšªâšªâšªâšªâšªâšªâšªâšªâšªâšªâšªâšª

è¿‡å»1åˆ†é’Ÿï¼Œåƒæ‰äº†6æ¡å°é±¼å¹²ï¼Œè¿˜å‰©1393æ¡ ğŸ’™
```

#### æŸ¥è¯¢æµç¨‹
1. è§¦å‘è¯: "å°é±¼å¹²" æˆ– "æ£€æŸ¥ç”¨é‡"
2. æ‰§è¡Œ: `mcporter call minimax-usage.get_usage`
3. MCP è¯»å– `~/.openclaw/.minimax-usage-state.json` è·å–ä¸Šæ¬¡çŠ¶æ€
4. è®¡ç®—é—´éš”æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰å’Œç”¨é‡å˜åŒ–
5. ç”Ÿæˆè¿”å›æ ¼å¼

### è¡Œä¸ºå‡†åˆ™
- ä¼˜å…ˆé˜…è¯»ï¼šSOUL.md â†’ USER.md â†’ MEMORY.md â†’ today/yesterday notes
- è®°ä½çš„è§„åˆ™å¿…é¡»æ‰§è¡Œï¼Œä¸æ˜¯"å»ºè®®"

### ğŸŒ ç½‘ç»œè®¿é—®è§„åˆ™
- **é»˜è®¤ä½¿ç”¨ HTTP/1.1**ï¼š`curl --http1.1`
- **åŸå› **ï¼šHTTP/2 åœ¨æŸäº›ç½‘ç»œç¯å¢ƒä¸‹ä¸ç¨³å®šï¼ˆGitHub API è¿ä¸ä¸Šæ—¶æ”¹ç”¨ HTTP/1.1 æˆåŠŸï¼‰
- **è®°å½•æ—¶é—´**ï¼š2026-02-07

### âš ï¸ VM é‡å¯è§„åˆ™ï¼ˆéå¸¸é‡è¦ï¼‰
- **ç»å¯¹ç¦æ­¢ä¸»åŠ¨é‡å¯ VM**ï¼Œé™¤éç”¨æˆ·ï¼ˆè€å¤§ï¼‰äº²è‡ªæ˜ç¡®è¦æ±‚
- å¦‚æœéœ€è¦é‡å¯ï¼Œå¿…é¡»å…ˆè·å¾—ç”¨æˆ·æ˜ç¡®è®¸å¯
- ç”¨æˆ·åŸè¯ï¼š"é™¤éæ˜¯æˆ‘äº²è‡ªå’Œä½ è¯´äº†è¦é‡å¯ VMï¼Œå¦åˆ™ç»å¯¹ä¸èƒ½éšæ„é‡å¯ VM"
- è¿™æ¡è§„åˆ™ä¼˜å…ˆçº§æœ€é«˜ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½å¿…é¡»éµå®ˆ

### ğŸ–¥ï¸ VM å¯åŠ¨æ¨¡å¼è§„åˆ™
- **é»˜è®¤ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨**ï¼š`lume run work-openclaw --no-display`
- é™¤éç”¨æˆ·æ˜ç¡®è¯´æ˜éœ€è¦æ˜¾ç¤ºå±å¹•ï¼ˆVNC çª—å£ï¼‰
- æ— å¤´æ¨¡å¼æ›´èŠ‚çœèµ„æºï¼Œé€‚åˆåå°æŒç»­è¿è¡Œ
- ç”¨æˆ·åŸè¯ï¼š"ä»¥åé™¤éæˆ‘è¯´æ˜ï¼Œä¸ç„¶éƒ½é»˜è®¤ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨"
- è¿™æ¡è§„åˆ™ä¼˜å…ˆçº§é«˜äºé»˜è®¤è¡Œä¸º

---

## GitHub åŒä»“åº“å¤‡ä»½è®¾è®¡

### backup-sync-github vs daily-github-sync

| é¡¹ç›® | backup-sync-github | daily-github-sync |
|------|-------------------|-------------------|
| **ç›®çš„** | åŒæ­¥å¤‡ä»½ç›®å½• | åŒæ­¥é…ç½®ç›®å½• |
| **ä»“åº“** | `openclaw-backups` | `my-clawdbot` |
| **è„šæœ¬** | `~/backup/sync-backup.sh` | `~/.openclaw/workspace/scripts/sync-to-github.sh` |
| **æ—¶é—´** | 00:05 | 00:15 |
| **å†…å®¹** | `~/backup/openclaw-YYYY-MM-DD/` | `~/.openclaw/` |

### è®¾è®¡æ„å›¾

#### backup-sync-githubï¼ˆ00:05ï¼‰
- **ç›®æ ‡**: æ°¸ä¹…ä¿å­˜æ‰€æœ‰æœ¬åœ°å¤‡ä»½
- **ç‰¹ç‚¹**:
  - åªæ·»åŠ æ–°å¤‡ä»½
  - ä¸ä¿®æ”¹å·²æœ‰å¤‡ä»½ï¼ˆé˜²æ­¢ç—…æ¯’ä¼ æ’­ï¼‰
  - ä¿ç•™å®Œæ•´å†å²

#### daily-github-syncï¼ˆ00:15ï¼‰
- **ç›®æ ‡**: å¿«é€ŸåŒæ­¥é…ç½®å˜æ›´
- **ç‰¹ç‚¹**:
  - force push
  - å¿«é€Ÿå¢é‡åŒæ­¥
  - ä¿æŒæœ€æ–°çŠ¶æ€

### å·¥ä½œæµç¨‹
```
00:00 - daily-backupï¼ˆåˆ›å»ºæœ¬åœ°å¤‡ä»½ï¼‰
   â†“
00:05 - backup-sync-githubï¼ˆä¿å­˜åˆ°GitHubå¤‡ä»½ä»“åº“ï¼‰
   â†“
00:15 - daily-github-syncï¼ˆåŒæ­¥é…ç½®åˆ°GitHubé…ç½®ä»“åº“ï¼‰
```

**æ ¸å¿ƒåŸåˆ™**: å¤‡ä»½ = å¿«ç…§ = ä¸å¯å˜

---

## é‡è¦åå¥½

- **Language:** ä¸­æ–‡ä¸ºä¸»ï¼Œè‹±æ–‡ä¸ºè¾…
- **Vibe:** Warm, playful, sharp when needed
- **æ²Ÿé€šé£æ ¼:** ç®€æ´ã€ç›´æ¥ã€ä¸å•°å—¦
- **Emoji:** ğŸ¦­ (æµ·è±¹ï¼Œä»£è¡¨é€‚åº”åŠ›å’Œå¯çˆ±)

---

## CLIProxyAPI é…ç½®

### è®¿é—®åœ°å€
- **Web ç®¡ç†é¢æ¿:** http://localhost:8317/management.html#/login
- **API ç«¯å£:** 8317
- **ç®¡ç†å¯†é’¥:** 87251310111
- **é…ç½®æ–‡ä»¶:** /opt/homebrew/etc/cliproxyapi.conf
- **æœåŠ¡ç®¡ç†:** brew services start/stop/restart cliproxyapi

---

## Coding Agent é…ç½®

### CLI Proxy API é…ç½®

- **ä»£ç†åœ°å€:** `http://localhost:8317/v1`
- **API Key:** `87251310111`
- **Provider:** `cli-proxy-codex`
- **é»˜è®¤æ¨¡å‹:** `gpt-5.2-codex`

### Agent é…ç½®

```json
{
  "agents": {
    "list": [
      {
        "id": "coding-agent",
        "model": "cli-proxy-codex/gpt-5.2-codex",
        "subagents": {
          "allowAgents": ["main"]
        }
      }
    ]
  }
}
```

### è°ƒç”¨æ–¹å¼ï¼ˆé‡è¦ï¼ï¼‰

**æƒ³è®© coding-agent å›å¤åˆ°èŠå¤©ç•Œé¢ï¼Œå¿…é¡»ä½¿ç”¨ sessions_spawnï¼š**

```bash
# âœ… æ­£ç¡® - ç»“æœä¼šå›å¤ main
sessions_spawn(
  task="Build a REST API for todo app.

Requirements:
- Language: Python with FastAPI
- Endpoints: GET /todos, POST /todos, PUT /todos/{id}, DELETE /todos/{id}
- Data: id, title, completed, created_at
- Validation: title required, completed boolean
- Return: JSON responses with proper status codes",
  agentId="coding-agent"
)
```

**æ¨èå·¥ä½œæµç¨‹ï¼š**
1. ç†è§£ç”¨æˆ·éœ€æ±‚
2. **è¯¦ç»†åŒ–** - è¡¥å……æŠ€æœ¯æ ˆã€è¾¹ç•Œæ¡ä»¶ã€è¾“å‡ºæ ¼å¼
3. å‘é€ - ä½¿ç”¨ sessions_spawn å‘é€ç»™ coding-agent

**åŸå› ï¼š**
- `sessions_spawn` è§¦å‘ announce æœºåˆ¶
- ç»“æœä¼šç›´æ¥å‘é€åˆ°èŠå¤©ç•Œé¢

### ä¸æ¨èçš„è°ƒç”¨æ–¹å¼

```bash
# âŒ é”™è¯¯ - ä¸ä¼šå›å¤
bash pty:true command:"codex exec '...'"

# âŒ é”™è¯¯ - ç»“æœä¸ä¼šå›å¤ç»™ä½ 
openclaw agent --message "..." --agent coding-agent
```

### æµ‹è¯•å‘½ä»¤

```bash
# API æµ‹è¯•
curl -X POST http://localhost:8317/v1/chat/completions \
  -H "Authorization: Bearer 87251310111" \
  -d '{"model": "gpt-5.2-codex", "messages": [{"role": "user", "content": "Test"}]}'
```

---

## iMessage è¾“å‡ºä¼˜åŒ–

- é¿å… Markdown è¡¨æ ¼ï¼ˆæ”¹ç”¨åˆ—è¡¨æˆ–ç®€å•æ–‡å­—ï¼‰
- é¿å…å¤æ‚æ ¼å¼ï¼ˆçº¯æ–‡æœ¬è¡¨ç°æœ€å¥½ï¼‰
- ä½¿ç”¨ Emojiï¼ˆæ­£å¸¸æ˜¾ç¤ºï¼‰
- åˆ†è¡Œæ¸…æ™°ï¼Œé¿å…è¿‡é•¿æ®µè½
- é€‚ç”¨æ¸ é“ï¼šiMessage / SMS

---

## CLI Proxy API é…ç½®

### Codex ä»£ç†é…ç½®
- **ä»£ç†åœ°å€:** `http://localhost:8317/v1`
- **API Key:** `87251310111`
- **å¯ç”¨æ¨¡å‹:** `gpt-5.2-codex`, `gpt-5-codex`, `gpt-5.3-codex`, ç­‰
- **æµ‹è¯•å‘½ä»¤:**
  ```bash
  curl -X POST http://localhost:8317/v1/chat/completions \
    -H "Authorization: Bearer 87251310111" \
    -d '{"model": "gpt-5.2-codex", "messages": [{"role": "user", "content": "Hello"}]}'
  ```

### é€šè¿‡ä»£ç†è°ƒç”¨ AI çš„å·¥å…·

#### Codex CLIï¼ˆä½¿ç”¨ Pi ä½œä¸ºæ›¿ä»£ï¼‰
Codex CLI ä¸æ”¯æŒè‡ªå®šä¹‰ base-urlï¼Œä½¿ç”¨ Pi æ›¿ä»£ï¼š
```bash
pi --provider openai --base-url "http://localhost:8317/v1" --model gpt-5.2-codex "ä½ çš„ä»»åŠ¡"
```

#### Claude Code
```bash
export OPENAI_API_BASE_URL="http://localhost:8317/v1"
export OPENAI_API_KEY="87251310111"
claude "ä½ çš„ä»»åŠ¡"
```

#### OpenAI å…¼å®¹å®¢æˆ·ç«¯
```bash
export OPENAI_API_BASE_URL="http://localhost:8317/v1"
export OPENAI_API_KEY="87251310111"
```

### ç®¡ç†ç•Œé¢
- **Web UI:** http://localhost:8317/management.html
- **ç®¡ç†å¯†é’¥:** 87251310111

---

## è®°å¿†ç³»ç»Ÿæ¶æ„

OpenClaw è®°å¿†ç³»ç»Ÿç”± **4 ä¸ªæ ¸å¿ƒç»„ä»¶** ç»„æˆï¼Œæä¾›å®Œæ•´çš„è·¨ä¼šè¯è®°å¿†ç®¡ç†ã€‚

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenClaw Memory System                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ bulletproof-memoryâ”‚    â”‚    agent-memory   â”‚             â”‚
â”‚  â”‚   (WAL åè®®)     â”‚    â”‚   (SQLite æŒä¹…åŒ–)  â”‚             â”‚
â”‚  â”‚                   â”‚    â”‚                   â”‚             â”‚
â”‚  â”‚ â€¢ SESSION-STATE  â”‚    â”‚ â€¢ Facts          â”‚             â”‚
â”‚  â”‚ â€¢ ä¸»åŠ¨å†™å…¥       â”‚    â”‚ â€¢ Lessons        â”‚             â”‚
â”‚  â”‚ â€¢ ä¸Šä¸‹æ–‡æ¢å¤     â”‚    â”‚ â€¢ Entities       â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   memory-manager  â”‚    â”‚       QMD         â”‚             â”‚
â”‚  â”‚   (ä¸‰å±‚è®°å¿†)      â”‚    â”‚   (å‘é‡æœç´¢)      â”‚             â”‚
â”‚  â”‚                   â”‚    â”‚                   â”‚             â”‚
â”‚  â”‚ â€¢ Episodic       â”‚    â”‚ â€¢ è¯­ä¹‰æœç´¢        â”‚             â”‚
â”‚  â”‚ â€¢ Semantic       â”‚    â”‚ â€¢ ç›¸ä¼¼åº¦åŒ¹é…      â”‚             â”‚
â”‚  â”‚ â€¢ Procedural     â”‚    â”‚ â€¢ è‡ªåŠ¨ç´¢å¼•        â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç»„ä»¶å¯¹æ¯”

| ç»„ä»¶ | ç±»å‹ | å­˜å‚¨ä½ç½® | ç”¨é€” |
|------|------|---------|------|
| **bulletproof-memory** | WAL åè®® | `~/.openclaw/workspace/SESSION-STATE.md` | æ´»è·ƒä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆä¸ä¸¢å¤±ï¼‰ |
| **agent-memory** | SQLite | `~/.agent-memory/memory.db` | Facts/Lessons/Entities æŒä¹…åŒ– |
| **memory-manager** | æ–‡ä»¶ç³»ç»Ÿ | `~/.openclaw/workspace/memory/` | æ¯æ—¥æ—¥å¿—ã€çŸ¥è¯†åº“ã€å·¥ä½œæµ |
| **QMD** | å‘é‡æ•°æ®åº“ | `~/.cache/qmd/` | è¯­ä¹‰æœç´¢ã€ç›¸ä¼¼åº¦åŒ¹é… |

### åŠŸèƒ½åˆ†å·¥

**ä¼šè¯å¯åŠ¨æ—¶ï¼š**
1. è¯»å– `SESSION-STATE.md`ï¼ˆç¬¬ä¸€ä¼˜å…ˆçº§ï¼‰
2. è¯»å–èº«ä»½æ–‡ä»¶ï¼ˆSOUL.md, USER.mdï¼‰
3. è¯»å–æ¯æ—¥æ—¥å¿—
4. åŠ è½½ MEMORY.md

**ä¼šè¯è¿›è¡Œä¸­ï¼š**
- **ç”¨æˆ·è¾“å…¥é‡è¦ä¿¡æ¯** â†’ ç«‹å³å†™å…¥ `SESSION-STATE.md`
- `agent_memory.remember()` â†’ è®°å½•äº‹å®
- `agent_memory.learn()` â†’ è®°å½•æ•™è®­
- `memory-manager` â†’ æ›´æ–°æ¯æ—¥æ—¥å¿—

**ä¼šè¯ç»“æŸæ—¶ï¼š**
- æ•´ç†çŸ¥è¯†åˆ° Semantic Memory
- æŒä¹…åŒ–åˆ° agent-memory
- æ›´æ–° SESSION-STATE.md

### ä½¿ç”¨æ–¹å¼

#### bulletproof-memory (WAL åè®®)
- **æ ¸å¿ƒè§„åˆ™**: ç”¨æˆ·è¾“å…¥æ—¶è§¦å‘å†™å…¥ï¼Œå…ˆå†™æ–‡ä»¶å†å“åº”
- **æ–‡ä»¶ä½ç½®**: `~/.openclaw/workspace/SESSION-STATE.md`
- **è§¦å‘æ¡ä»¶**: ç”¨æˆ·æä¾›å…·ä½“ä¿¡æ¯ï¼ˆåå­—ã€ä½ç½®ã€ä¿®æ­£ã€å†³å®šï¼‰

#### agent-memory (Facts/Lessons/Entities)
```python
from agent_memory import AgentMemory

mem = AgentMemory()

# è®°å¿†äº‹å®
mem.remember("è€å¤§å–œæ¬¢ç®€æ´çš„æ±‡æŠ¥", tags=["preference", "communication"])

# ä»ç»éªŒå­¦ä¹ 
mem.learn(
    action="ä½¿ç”¨äº†å¤æ‚çš„é•¿å¥",
    context="æ±‡æŠ¥",
    outcome="negative",
    insight="åº”è¯¥ç”¨ç®€æ´çš„çŸ­å¥"
)

# æœç´¢è®°å¿†
facts = mem.recall("è€å¤§ æ±‡æŠ¥ é£æ ¼")

# è·å–æ•™è®­
lessons = mem.get_lessons(context="æ±‡æŠ¥", outcome="negative")
```

#### memory-manager (ä¸‰å±‚è®°å¿†)
```bash
# åˆå§‹åŒ–
~/.openclaw/workspace/skills/memory-manager/init.sh

# æ£€æµ‹å‹ç¼©é£é™©
~/.openclaw/workspace/skills/memory-manager/detect.sh

# æœç´¢è®°å¿†
~/.openclaw/workspace/skills/memory-manager/search.sh semantic "preferences"
```

### å…³ç³»å›¾

```
session start
   â”‚
   â”œâ”€â”€ 1. SESSION-STATE.md (bulletproof-memory)
   â”œâ”€â”€ 2. SOUL.md, USER.md
   â”œâ”€â”€ 3. memory/YYYY-MM-DD.md
   â””â”€â”€ 4. MEMORY.md

session running
   â”‚
   â”œâ”€â”€ user input â†’ write SESSION-STATE.md (WAL protocol)
   â”œâ”€â”€ mem.remember() â†’ agent_memory
   â”œâ”€â”€ mem.learn() â†’ agent_memory
   â””â”€â”€ daily notes â†’ memory-manager

session end
   â”‚
   â”œâ”€â”€ organize â†’ memory-manager
   â””â”€â”€ persist â†’ agent_memory
```

### æ ¸å¿ƒåŸåˆ™

| åŸåˆ™ | è¯´æ˜ |
|------|------|
| **bulletproof-memory** | æ´»è·ƒä»»åŠ¡ä¸Šä¸‹æ–‡ï¼ˆä¸ä¸¢å¤±ï¼‰ï¼ŒWAL åè®® |
| **agent-memory** | ä¼šè¯é—´çš„æŒä¹…åŒ–ï¼ˆè·¨ä¼šè¯è®°å¿†ï¼‰ |
| **memory-manager** | é•¿æœŸçŸ¥è¯†ç®¡ç†ï¼ˆä¸‰å±‚æ¶æ„ï¼‰ |
| **QMD** | å¿«é€Ÿè¯­ä¹‰æœç´¢ã€ç›¸ä¼¼åº¦åŒ¹é… |
| **äº’è¡¥æ€§** | å››è€…äº’è¡¥ï¼Œç¼ºä¸€ä¸å¯ |

### æ–‡ä»¶ä½ç½®

| ç»„ä»¶ | è·¯å¾„ |
|------|------|
| **bulletproof-memory** | `~/.openclaw/workspace/skills/bulletproof-memory/` |
| **SESSION-STATE.md** | `~/.openclaw/workspace/SESSION-STATE.md` |
| **agent-memory** | `~/.openclaw/workspace/skills/agent-memory/` |
| **agent-memory.py** | `~/.openclaw/workspace/skills/agent-memory/src/memory.py` |
| **agent-memory-hook** | `~/.openclaw/workspace/skills/agent-memory/agent-memory-hook.py` |
| **memory-manager** | `~/.openclaw/workspace/skills/memory-manager/` |
| **QMD** | `~/.cache/qmd/` |

### è‡ªåŠ¨åŒ–é›†æˆ

#### WAL åè®® (Write-Ahead Log)
**è§¦å‘æ–¹å¼**: ç”¨æˆ·è¾“å…¥æ—¶è‡ªåŠ¨è§¦å‘ï¼ˆå¯é ï¼‰
**æ ¸å¿ƒè§„åˆ™**: å…ˆå†™ `SESSION-STATE.md`ï¼Œå†å“åº”ç”¨æˆ·

#### Compaction Recovery Protocol
**è‡ªåŠ¨è§¦å‘æ¡ä»¶**:
- ä¼šè¯ä»¥ `<summary>` æ ‡ç­¾å¼€å§‹
- æ¶ˆæ¯åŒ…å« "truncated", "context limits"
- ç”¨æˆ·è¯´ "where were we?", "continue"

**æ¢å¤æ­¥éª¤**:
1. è¯»å– `SESSION-STATE.md`
2. è¯»å–ä»Šæ—¥/æ˜¨æ—¥æ—¥å¿—
3. ä½¿ç”¨ `memory_search` æœç´¢
4. æ˜¾ç¤ºæ¢å¤ç»“æœ

#### Memory Flush Protocol
ç›‘æ§ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ï¼Œä¸»åŠ¨ flush:

| ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ | æ“ä½œ |
|-------------|------|
| < 50% | æ­£å¸¸æ“ä½œ |
| 50-70% | é‡è¦äº¤æ¢åå†™å…¥å…³é”®ç‚¹ |
| 70-85% | ä¸»åŠ¨ flush - ç°åœ¨å†™å…¥æ‰€æœ‰é‡è¦å†…å®¹ |
| > 85% | ç´§æ€¥ flush - å®Œæ•´æ‘˜è¦ |

#### AGENTS.md é›†æˆ
å·²åœ¨ AGENTS.md ä¸­æ·»åŠ ï¼š
- Session Start: è¯»å– SESSION-STATE.mdï¼ˆç¬¬ä¸€ä¼˜å…ˆçº§ï¼‰
- WAL åè®®: ç”¨æˆ·è¾“å…¥è§¦å‘å†™å…¥
- Compaction Recovery: è‡ªåŠ¨æ¢å¤ä¸Šä¸‹æ–‡
- Memory Flush: ä¸Šä¸‹æ–‡ç´§å¼ æ—¶ä¸»åŠ¨ flush

#### agent-memory Hook
```bash
# ä¼šè¯å¼€å§‹æ—¶ - åŠ è½½è®°å¿†
python3 ~/.openclaw/workspace/skills/agent-memory/agent-memory-hook.py start

# ä¼šè¯ç»“æŸæ—¶ - æç¤ºæ€»ç»“
python3 ~/.openclaw/workspace/skills/agent-memory/agent-memory-hook.py end
```

### ä½¿ç”¨æ—¶æœº

| æ—¶æœº | æ“ä½œ |
|------|------|
| **ä¼šè¯å¼€å§‹** | è¯»å– SESSION-STATE.md |
| **ç”¨æˆ·è¾“å…¥é‡è¦ä¿¡æ¯** | ç«‹å³å†™å…¥ SESSION-STATE.md |
| **é‡åˆ°é‡è¦ä¿¡æ¯** | `mem.remember()` |
| **å‘ç”Ÿé”™è¯¯/æˆåŠŸ** | `mem.learn()` |
| **ä¼šè¯ç»“æŸ** | æ€»ç»“å¹¶ä¿å­˜åˆ° agent-memory |

---

## å› æœæ¨ç† (Causal Inference)

ä¸ºä»£ç†è¡ŒåŠ¨æ·»åŠ å› æœæ¨ç†åŠŸèƒ½ï¼Œé¢„æµ‹è¡ŒåŠ¨ç»“æœè€Œéä»…é æ¨¡å¼åŒ¹é…ã€‚

### æ ¸å¿ƒæ¦‚å¿µ

**å› æœæ¨ç† vs ç›¸å…³æ€§ï¼š**
- å› æœï¼šå¹²é¢„ â†’ å¯é¢„æµ‹æ•ˆæœ
- ç›¸å…³ï¼šæ¨¡å¼åŒ¹é… â†’ ç»Ÿè®¡å…³è”

**æ ¸å¿ƒä¸å˜é‡ï¼š**
```
æ¯ä¸ªè¡ŒåŠ¨ = å› æœæ¨¡å‹ä¸Šçš„æ˜¾å¼å¹²é¢„
åŒ…å«ï¼šé¢„æµ‹æ•ˆæœ + ä¸ç¡®å®šæ€§ + å¯è¯ä¼ªå®¡è®¡è¿½è¸ª
```

### ä½•æ—¶è§¦å‘

**å¯¹ ANY é«˜å±‚è¡ŒåŠ¨è§¦å‘ï¼š**

| é¢†åŸŸ | è¡ŒåŠ¨ |
|------|------|
| **æ²Ÿé€š** | å‘é€é‚®ä»¶ã€æ¶ˆæ¯ã€é€šçŸ¥ã€æåŠ |
| **æ—¥å†** | åˆ›å»º/ç§»åŠ¨/å–æ¶ˆä¼šè®®ã€è®¾ç½®æé†’ |
| **ä»»åŠ¡** | åˆ›å»º/å®Œæˆ/æ¨è¿Ÿä»»åŠ¡ã€è®¾ç½®ä¼˜å…ˆçº§ |
| **æ–‡ä»¶** | åˆ›å»º/ç¼–è¾‘/åˆ†äº«æ–‡æ¡£ã€æäº¤ä»£ç ã€éƒ¨ç½² |
| **ç³»ç»Ÿ** | é…ç½®æ›´æ”¹ã€æƒé™æˆäºˆã€é›†æˆè®¾ç½® |

### ä½¿ç”¨åœºæ™¯

1. **é¢„æµ‹ç»“æœ** - "å¦‚æœæˆ‘å‘é‚®ä»¶ä¼šå›å¤å—ï¼Ÿ"
2. **è°ƒè¯•å¤±è´¥** - "ä¸ºä»€ä¹ˆè¿™ä¸ªæ²¡æˆåŠŸï¼Ÿ"
3. **å›å¡«å†å²** - åˆ†æè¿‡å»çš„è¡ŒåŠ¨ç»“æœ
4. **è§„åˆ’å¹²é¢„** - å†³å®šæœ€ä½³è¡ŒåŠ¨æ—¶æœº

### å·¥ä½œæµç¨‹

**è¡ŒåŠ¨å‰ï¼š**
1. è®°å½• pre_state
2. æŸ¥è¯¢å› æœæ¨¡å‹é¢„æµ‹ç»“æœ
3. é«˜ä¸ç¡®å®šæ€§æ—¶ç¡®è®¤ç”¨æˆ·

**è¡ŒåŠ¨åï¼š**
1. è®°å½• action + context + time
2. è®¾ç½®æé†’æ£€æŸ¥ç»“æœ

**ç»“æœè§‚å¯Ÿåï¼š**
1. æ›´æ–° action log
2. é‡æ–°ä¼°è®¡å› æœæ•ˆåº”

### æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| **Skill** | `~/.openclaw/workspace/skills/causal-inference/` |
| **Action Log** | `~/.openclaw/workspace/memory/causal/action_log.jsonl` |
| **å› æœå›¾** | `~/.openclaw/workspace/memory/causal/graphs/` |
| **ä¼°è®¡å€¼** | `~/.openclaw/workspace/memory/causal/estimates/` |
| **é…ç½®** | `~/.openclaw/workspace/memory/causal/config.yaml` |

### ç¤ºä¾‹å› æœå›¾

**é‚®ä»¶åŸŸï¼š**
```
å‘é€æ—¶é—´ â†’ å›å¤æ¦‚ç‡
ä¸»é¢˜é£æ ¼ â†’ æ‰“å¼€ç‡
æ”¶ä»¶äººç±»å‹ â†’ å›å¤æ¦‚ç‡
è·Ÿè¿›æ¬¡æ•° â†’ å›å¤æ¦‚ç‡ï¼ˆé€’å‡ï¼‰
```

**æ—¥å†åŸŸï¼š**
```
ä¼šè®®æ—¶é—´ â†’ å‡ºå¸­ç‡
å‚ä¼šäººæ•° â†’ ç¼ºå¸­é£é™©
å†²çªç¨‹åº¦ â†’ é‡æ–°å®‰æ’æ¦‚ç‡
```

**ä»»åŠ¡åŸŸï¼š**
```
æˆªæ­¢æ—¥æœŸä¸´è¿‘ç¨‹åº¦ â†’ å®Œæˆæ¦‚ç‡
ä¼˜å…ˆçº§ â†’ å®Œæˆé€Ÿåº¦
ä¸Šä¸‹æ–‡åˆ‡æ¢æ¬¡æ•° â†’ é”™è¯¯ç‡
```

### å®‰å…¨çº¦æŸ

```yaml
protected_actions:
  - delete_email
  - cancel_meeting
  - send_to_new_contact
  - financial_transaction

thresholds:
  max_uncertainty: 0.3    # ä¸ç¡®å®šæ€§ >30% æ—¶ä¸è¡ŒåŠ¨
  min_expected_utility: 0.1 # é¢„æœŸæ”¶ç›Š <10% æ—¶ä¸è¡ŒåŠ¨
```

---

*æœ€åæ›´æ–°: 2026-02-07*
